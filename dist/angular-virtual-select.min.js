!function(t){var e={};function n(l){if(e[l])return e[l].exports;var c=e[l]={i:l,l:!1,exports:{}};return t[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}n.m=t,n.c=e,n.d=function(t,e,l){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:l})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var l,c;n(1);window,l=window.angular,c=window._,l.module("angular-virtual-select",["vs-repeat"]).directive("virtualSelect",["$filter","$document","$timeout",function(t,e,n){return{restrict:"AE",replace:!0,scope:{ngModel:"=",choicesRepeat:"=",filterBy:"=",placeholder:"=",displayProperty:"=",coreProperty:"=",singleselect:"=",multiselect:"=",limit:"=",onInputChange:"&",dynamicChoices:"=",allowCustom:"=",selectName:"=",localizeDisplayProperty:"=",blockModelUpdate:"="},template:'<div class="virtual-select ui-select-container ui-select-multiple ui-select-bootstrap">\n\t\t\t\t\t\t<div class="ui-select-match">\n\t\t\t\t\t\t\t<span ng-repeat="item in selected track by $index">\n\t\t\t\t\t\t\t\t<span class="ui-select-match-item btn btn-primary btn-xs btn-sm">\n\t\t\t\t\t\t\t\t\t<span class="close ui-select-match-close" ng-click="removeItem(item)">&nbsp;&times;</span>\n\t\t\t\t\t\t\t\t\t<span>{{display(item)}}</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<input type="text" class="ui-select-search" ng-model="searchText" ng-click="activate()" placeholder="{{ selected.length ? \'\' : placeholder}}">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ul ng-if="opened && list.length" class="virtual-select-list-container ui-select-choices ui-select-choices-content ui-select-dropdown dropdown-menu">\n\t\t\t\t\t\t\t<li class="virtual-scroll-container ui-select-choices-group" vs-repeat>\n\t\t\t\t\t\t\t\t<div class="ui-select-choices-row btn-sm" ng-repeat="choice in list | virtualSelectfilterSelected:choice:selected track by $index" ng-click="itemClick(choice)">\n\t\t\t\t\t\t\t\t\t<a class="virtual-scroll-list-item ui-select-choices-row-inner"> \x3c!-- ui-select layout --\x3e\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t{{display(choice)}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>',link:function(i,o,s){let r,a=null!=s.singleselect,u=null!=s.multiselect,d=null!=s.dynamicChoices,p=null!=s.allowCustom,f=s.onInputChange,h=function(t){let e=t;return t&&"object"==typeof t&&(e=JSON.parse(l.toJson(e))),e};a||u||(u=!0);let y=function(){r=l.copy(i.choicesRepeat),r=h(r),i.list=l.copy(r)};y();let m=function(){if(i.filterBy){let e,n=c.some(i.filterBy,function(t){return!c.isUndefined(t)});n&&(e=l.copy(r)),c.each(i.filterBy,function(n,l){n&&(e=t(l)(e,n))}),n&&(i.list=e,r=i.list)}};i.$watchCollection("choicesRepeat",function(){y(),m(),w(i.searchText),i.blockModelUpdate||g()},!0);let g=function(){if(void 0!==i.selected){let t=[],e=!1;c.each(i.selected,function(n){(e=i.coreProperty?c.find(i.list,function(t){return c.isEqual(h(t[i.coreProperty]),h(n[i.coreProperty]))}):c.find(i.list,function(t){return c.isEqual(h(t),h(n))}))&&t.push(e)}),i.selected=t,v()}};i.$watchCollection("filterBy",function(t,e){t&&(c.isEqual(t,e)||m())},!0),i.display=function(e){if(null!=e){let n=e;return i.displayProperty&&(n=e[i.displayProperty]),null!=s.localizeDisplayProperty&&(n=t("i18n")(n,i.localizeDisplayProperty)),n}return null};let v=function(){let t=null;i.selected&&i.selected.length&&(t=i.coreProperty?i.selected.map(t=>t[i.coreProperty]):i.selected),i.ngModel=t};i.activate=function(){a&&i.selected&&i.selected.length||u&&i.limit&&i.selected&&i.limit<=i.selected.length||(i.opened=!0,n(function(){i.$digest()},0))},i.$on("virtualScrollActivate",function(t,e){e==i.selectName&&null!=e?i.activate():e!=i.selectName&&b()}),i.$watch("opened",function(t,e){i.selectName&&i.$emit("vsSpecificOpenStateChange",{name:i.selectName,val:t})}),i.itemClick=function(t){c.find(i.selected,function(e){return c.isEqual(e,t)})||(a&&i.selected&&!i.selected.length?(i.selected.push(t),v()):u&&(!i.limit||i.limit&&i.selected&&+i.limit>i.selected.length)&&(i.selected.push(t),v())),u||(i.opened=!1),(!p||i.selected&&i.selected.length)&&(i.searchText="")},i.removeItem=function(t){let e=i.selected&&i.selected.indexOf(t);e>-1&&(i.selected.splice(e,1),v()),f&&i.onInputChange({text:""})};let b=function(){i.opened=!1,(!p||i.selected&&i.selected.length)&&(i.searchText=""),n(function(){i.$digest()},0)},x=function(t){o[0].contains(t.target)||b()};i.$watch("opened",function(t,e){t?document.addEventListener("click",x,!0):c.isUndefined(t)||document.removeEventListener("click",x,!0)}),i.$watch("ngModel",function(t,e){t&&("object"!=typeof t||t.length)?d||p?"string"==typeof t?i.searchText=t:i.selected=t:i.selected=function(t){let e=[];if("object"!=typeof t){let n=c.find(r,function(e){let n=i.coreProperty?e[i.coreProperty]:e;return"object"==typeof n&&(n=h(n)),c.isEqual(n,t)});null!=n&&e.push(n)}else"object"==typeof t&&c.each(t,function(t){let n=c.find(r,function(e){let n=i.coreProperty?e[i.coreProperty]:e;return"object"==typeof n&&(n=h(n)),c.isEqual(n,t)});null!=n&&e.push(n)});return e}(h(t)):(i.selected=[],i.searchText="")}),i.$watch("searchText",function(t,e){w(t,e)});let w=function(t,e){f?i.onInputChange({text:t}):t?t!=e&&(i.list=c.filter(r,function(e){let n=i.displayProperty?e[i.displayProperty]:e;return n&&-1!=n.toLowerCase().indexOf(t.toLowerCase())})):i.list=r,t&&p&&(i.selected&&i.selected.length||(i.ngModel=t));let l=document.getElementsByClassName("virtual-scroll-container")&&document.getElementsByClassName("virtual-scroll-container")[0];l&&l.scrollTo(0,0),n(function(){i.$digest()},0)};i.$on("$destroy",function(){e.off("click",x)})}}}]).filter("virtualSelectfilterSelected",function(){return function(t,e,n){return n&&n.length?c.difference(t,n):t}})},function(t,e){}]);