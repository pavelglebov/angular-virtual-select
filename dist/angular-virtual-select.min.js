!function(t){var e={};function n(c){if(e[c])return e[c].exports;var l=e[c]={i:c,l:!1,exports:{}};return t[c].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=t,n.c=e,n.d=function(t,e,c){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:c})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var c,l,i;n(1);window,c=window.angular,l=window.jQuery,i=window._,c.module("angular-virtual-select",["vs-repeat"]).directive("virtualSelect",["$filter","$document","$timeout",function(t,e,n){return{restrict:"AE",replace:!0,scope:{ngModel:"=",choicesRepeat:"=",filterBy:"=",placeholder:"=",displayProperty:"=",coreProperty:"=",singleselect:"=",multiselect:"=",limit:"=",onInputChange:"&",dynamicChoices:"=",allowCustom:"=",selectName:"=",localizeDisplayProperty:"=",blockModelUpdate:"="},template:'<div class="virtual-select ui-select-container ui-select-multiple ui-select-bootstrap">\n\t\t\t\t\t\t<div class="ui-select-match">\n\t\t\t\t\t\t\t<span ng-repeat="item in selected track by $index">\n\t\t\t\t\t\t\t\t<span class="ui-select-match-item btn btn-primary btn-xs btn-sm">\n\t\t\t\t\t\t\t\t\t<span class="close ui-select-match-close" ng-click="removeItem(item)">&nbsp;&times;</span>\n\t\t\t\t\t\t\t\t\t<span>{{display(item)}}</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<input type="text" class="ui-select-search" ng-model="searchText" ng-click="activate()" placeholder="{{ selected.length ? \'\' : placeholder}}">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ul ng-if="opened && list.length" class="virtual-select-list-container ui-select-choices ui-select-choices-content ui-select-dropdown dropdown-menu">\n\t\t\t\t\t\t\t<li class="virtual-scroll-container ui-select-choices-group" vs-repeat>\n\t\t\t\t\t\t\t\t<div class="ui-select-choices-row btn-sm" ng-repeat="choice in list | virtualSelectfilterSelected:choice:selected track by $index" ng-click="itemClick(choice)">\n\t\t\t\t\t\t\t\t\t<a class="virtual-scroll-list-item ui-select-choices-row-inner"> \x3c!-- ui-select layout --\x3e\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t{{display(choice)}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>',link:function(o,r,s){var a,u=null!=s.singleselect,d=null!=s.multiselect,p=null!=s.dynamicChoices,f=null!=s.allowCustom,h=s.onInputChange,v=function(t){var e=t;return t&&"object"==typeof t&&(e=JSON.parse(c.toJson(e))),e};u||d||(d=!0);var y=function(){a=c.copy(o.choicesRepeat),a=v(a),o.list=c.copy(a)};y();var m=function(){if(o.filterBy){var e,n=i.some(o.filterBy,function(t){return!i.isUndefined(t)});n&&(e=c.copy(a)),i.each(o.filterBy,function(n,c){n&&(e=t(c)(e,n))}),n&&(o.list=e,a=o.list)}};o.$watchCollection("choicesRepeat",function(){y(),m(),P(o.searchText),o.blockModelUpdate||g()},!0);var g=function(){if(void 0!==o.selected){var t=[],e=!1;i.each(o.selected,function(n){(e=o.coreProperty?i.find(o.list,function(t){return i.isEqual(v(t[o.coreProperty]),v(n[o.coreProperty]))}):i.find(o.list,function(t){return i.isEqual(v(t),v(n))}))&&t.push(e)}),o.selected=t,w()}};o.$watchCollection("filterBy",function(t,e){t&&(i.isEqual(t,e)||m())},!0),o.display=function(e){if(null!=e){var n=e;return o.displayProperty&&(n=e[o.displayProperty]),null!=s.localizeDisplayProperty&&(n=t("i18n")(n,o.localizeDisplayProperty)),n}return null};var w=function(){var t=null;o.selected&&o.selected.length&&(t=o.coreProperty?o.selected.map(t=>t[o.coreProperty]):o.selected),o.ngModel=t};o.activate=function(){u&&o.selected&&o.selected.length||d&&o.limit&&o.selected&&o.limit<=o.selected.length||(o.opened=!0,n(function(){o.$digest()},0))},o.$on("virtualScrollActivate",function(t,e){e==o.selectName&&null!=e?o.activate():e!=o.selectName&&x()}),o.$watch("opened",function(t,e){o.selectName&&o.$emit("vsSpecificOpenStateChange",{name:o.selectName,val:t})}),o.itemClick=function(t){i.find(o.selected,function(e){return i.isEqual(e,t)})||(u&&o.selected&&!o.selected.length?(o.selected.push(t),w()):d&&(!o.limit||o.limit&&o.selected&&+o.limit>o.selected.length)&&(o.selected.push(t),w())),d||(o.opened=!1),(!f||o.selected&&o.selected.length)&&(o.searchText="")},o.removeItem=function(t){var e=o.selected&&o.selected.indexOf(t);e>-1&&(o.selected.splice(e,1),w()),h&&o.onInputChange({text:""})};var x=function(){o.opened=!1,(!f||o.selected&&o.selected.length)&&(o.searchText=""),n(function(){o.$digest()},0)},b=function(t){l(t.target).closest(r[0]).length||x()};o.$watch("opened",function(t,e){t?document.addEventListener("click",b,!0):i.isUndefined(t)||document.removeEventListener("click",b,!0)}),o.$watch("ngModel",function(t,e){t&&("object"!=typeof t||t.length)?p||f?"string"==typeof t?o.searchText=t:o.selected=t:o.selected=function(t){var e=[];if("object"!=typeof t){var n=i.find(a,function(e){var n=o.coreProperty?e[o.coreProperty]:e;return"object"==typeof n&&(n=v(n)),i.isEqual(n,t)});null!=n&&e.push(n)}else"object"==typeof t&&i.each(t,function(t){var n=i.find(a,function(e){var n=o.coreProperty?e[o.coreProperty]:e;return"object"==typeof n&&(n=v(n)),i.isEqual(n,t)});null!=n&&e.push(n)});return e}(v(t)):(o.selected=[],o.searchText="")}),o.$watch("searchText",function(t,e){P(t,e)});var P=function(t,e){h?o.onInputChange({text:t}):t?t!=e&&(o.list=i.filter(a,function(e){var n=o.displayProperty?e[o.displayProperty]:e;return n&&-1!=n.toLowerCase().indexOf(t.toLowerCase())})):o.list=a,t&&f&&(o.selected&&o.selected.length||(o.ngModel=t)),l(".virtual-scroll-container").scrollTop(0),n(function(){o.$digest()},0)};o.$on("$destroy",function(){e.off("click",b)})}}}]).filter("virtualSelectfilterSelected",function(){return function(t,e,n){if(n&&n.length){var c=[];return i.each(t,function(t){var e=n.indexOf(t),l=i.find(n,function(e){return i.isEqual(e,t)});-1!=e||l||c.push(t)}),c}return t}})},function(t,e){}]);